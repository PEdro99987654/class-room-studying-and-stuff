<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ILIA OS | GIGANT-CORE</title>
    <style>
        
        :root {
            --os-primary-bg: #010203;
            --os-secondary-bg: #05070a;
            --os-accent-neon: #00f3ff;
            --os-accent-kali: #5577ff;
            --os-accent-warn: #ff3e3e;
            --os-accent-gold: #ffd700;
            --os-accent-safe: #39ff14;
            --os-text-main: #e0e0e0;
            --os-text-dim: #666666;
            --os-border-thin: 1px solid #1a1a1a;
            --os-border-thick: 2px solid #333333;
            --os-font-family: 'Cascadia Code', 'Consolas', 'Courier New', monospace;
            --os-glow-soft: 0 0 10px rgba(0, 243, 255, 0.2);
            --os-glow-hard: 0 0 25px rgba(0, 243, 255, 0.5);
            --os-shadow-win: 0 50px 100px rgba(0,0,0,0.9);
            --os-trans-fast: 0.1s ease;
            --os-trans-norm: 0.3s ease;
            --os-win-blur: blur(20px);
            --os-win-opacity: 0.97;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            cursor: crosshair;
        }

        body, html {
            width: 100%;
            height: 100%;
            background-color: var(--os-primary-bg);
            color: var(--os-text-main);
            font-family: var(--os-font-family);
            overflow: hidden;
            user-select: none;
        }


        #neural-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            opacity: 0.4;
            pointer-events: none;
        }


        #auth-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, #0a0c10, #000);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            transition: opacity 1s ease;
        }

        .auth-container {
            width: 480px;
            background: var(--os-secondary-bg);
            border: 1px solid var(--os-accent-kali);
            padding: 60px;
            text-align: center;
            box-shadow: 0 0 100px rgba(85, 119, 255, 0.1);
        }

        .auth-container h1 {
            font-size: 24px;
            letter-spacing: 8px;
            color: var(--os-accent-kali);
            margin-bottom: 40px;
            text-transform: uppercase;
        }

        .auth-field-wrapper {
            margin-bottom: 25px;
            text-align: left;
        }

        .auth-field-wrapper label {
            font-size: 10px;
            color: var(--os-text-dim);
            text-transform: uppercase;
            display: block;
            margin-bottom: 8px;
        }

        .auth-input {
            width: 100%;
            background: #000;
            border: 1px solid #222;
            padding: 15px;
            color: var(--os-accent-neon);
            outline: none;
            font-size: 16px;
            transition: var(--os-trans-norm);
        }

        .auth-input:focus {
            border-color: var(--os-accent-neon);
            box-shadow: var(--os-glow-soft);
        }

        .auth-submit-btn {
            width: 100%;
            padding: 18px;
            background: var(--os-accent-kali);
            color: #fff;
            border: none;
            font-weight: bold;
            letter-spacing: 2px;
            text-transform: uppercase;
            cursor: pointer;
            margin-top: 20px;
            transition: var(--os-trans-norm);
        }

        .auth-submit-btn:hover {
            background: var(--os-accent-neon);
            color: #000;
            box-shadow: var(--os-glow-hard);
        }

        #desktop-workspace {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: none;
            z-index: 5;
        }

        .os-dock {
            position: absolute;
            left: 30px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 20px;
            background: rgba(0,0,0,0.8);
            padding: 25px;
            border-radius: 20px;
            border: var(--os-border-thin);
            z-index: 1000;
        }

        .os-app-icon {
            width: 60px;
            height: 60px;
            background: #0a0a0a;
            border: 1px solid #333;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: var(--os-trans-norm);
        }

        .os-app-icon:hover {
            transform: scale(1.1);
            border-color: var(--os-accent-neon);
            background: rgba(0, 243, 255, 0.05);
        }

        .os-app-icon span {
            font-size: 24px;
        }

        .os-app-icon label {
            font-size: 8px;
            color: var(--os-accent-neon);
            margin-top: 5px;
            font-weight: bold;
        }

        .os-window {
            position: absolute;
            background: var(--os-win-opacity);
            backdrop-filter: var(--os-win-blur);
            border: var(--os-border-thin);
            box-shadow: var(--os-shadow-win);
            display: none;
            flex-direction: column;
            border-radius: 8px;
            overflow: hidden;
            z-index: 100;
        }

        .os-window-header {
            background: #111;
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--os-accent-kali);
        }

        .os-window-title {
            font-size: 11px;
            font-weight: 900;
            color: var(--os-accent-kali);
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .os-window-controls {
            display: flex;
            gap: 15px;
        }

        .os-control-btn {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: pointer;
        }

        .btn-close { background: var(--os-accent-warn); }
        .btn-min { background: var(--os-accent-gold); }
        .btn-max { background: var(--os-accent-safe); }

        .os-window-body {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }


        #terminal-container {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .terminal-log {
            flex: 1;
            color: var(--os-accent-safe);
            font-size: 13px;
            line-height: 1.6;
            margin-bottom: 20px;
            white-space: pre-wrap;
            overflow-y: auto;
            padding-right: 10px;
        }

        .terminal-input-wrapper {
            display: flex;
            align-items: center;
            border-top: 1px solid #222;
            padding-top: 15px;
        }

        .terminal-prompt {
            color: var(--os-accent-neon);
            margin-right: 12px;
            font-weight: bold;
        }

        #terminal-input-field {
            background: transparent;
            border: none;
            color: #fff;
            flex: 1;
            outline: none;
            font-size: 14px;
        }

        .arcade-ui {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .arcade-top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #0a0a0a;
            padding: 15px;
            border-radius: 5px;
        }

        #game-viewport {
            background: #000;
            border: 1px solid #222;
            display: block;
            margin: 0 auto;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }

        .difficulty-selector {
            display: flex;
            gap: 10px;
        }

        .diff-btn {
            background: #111;
            border: 1px solid #333;
            color: var(--os-text-dim);
            padding: 8px 15px;
            font-size: 10px;
            text-transform: uppercase;
            font-weight: bold;
            transition: var(--os-trans-fast);
        }

        .diff-btn.active {
            border-color: var(--os-accent-gold);
            color: var(--os-accent-gold);
            background: rgba(255, 215, 0, 0.05);
        }


        #global-taskbar {
            position: fixed;
            bottom: 0;
            width: 100%;
            height: 45px;
            background: rgba(0,0,0,0.95);
            border-top: var(--os-border-thin);
            display: flex;
            align-items: center;
            padding: 0 40px;
            z-index: 10000;
        }

        .task-stat-block {
            margin-right: 40px;
            font-size: 11px;
            color: var(--os-text-dim);
            letter-spacing: 1px;
        }

        .task-stat-block span {
            color: var(--os-accent-neon);
            font-weight: 900;
        }

        #os-clock {
            margin-left: auto;
            color: var(--os-accent-kali);
            font-weight: bold;
        }

    </style>
</head>
<body>

    <canvas id="neural-background"></canvas>

    <div id="auth-overlay">
        <div class="auth-container">
            <h1>OS_BOOT_INIT</h1>
            <div class="auth-field-wrapper">
                <label>Hacker Alias (Callsign)</label>
                <input type="text" id="input-alias" class="auth-input" placeholder="e.g. Ilia_X">
            </div>
            <div class="auth-field-wrapper">
                <label>Current Region</label>
                <input type="text" id="input-region" class="auth-input" placeholder="e.g. Europe">
            </div>
            <div class="auth-field-wrapper">
                <label>Operator Age</label>
                <input type="number" id="input-age" class="auth-input" placeholder="e.g. 21">
            </div>
            <button class="auth-submit-btn" onclick="systemInitialize()">Establish Session</button>
        </div>
    </div>

    <div id="desktop-workspace">
        
        <div class="os-dock">
            <div class="os-app-icon" onclick="toggleWindow('win-term')"><span>üêö</span><label>KALI</label></div>
            <div class="os-app-icon" onclick="toggleWindow('win-arcade')"><span>üïπÔ∏è</span><label>ARCADE</label></div>
            <div class="os-app-icon" onclick="toggleWindow('win-vault')"><span>üíé</span><label>VAULT</label></div>
            <div class="os-app-icon" onclick="factoryReset()"><span>üíÄ</span><label>WIPE</label></div>
        </div>

        <div id="win-arcade" class="os-window" style="width: 960px; height: 740px; top: 50px; left: 160px;">
            <div class="os-window-header" onmousedown="handleDrag(this.parentElement, event)">
                <div class="os-window-title">SUB-ROUTINE_ARCADE_v22</div>
                <div class="os-window-controls">
                    <div class="os-control-btn btn-min"></div>
                    <div class="os-control-btn btn-max"></div>
                    <div class="os-control-btn btn-close" onclick="toggleWindow('win-arcade')"></div>
                </div>
            </div>
            <div class="os-window-body">
                <div class="arcade-ui">
                    <div class="arcade-top-bar">
                        <div style="display:flex; gap:10px;">
                            <button class="auth-submit-btn" style="width:140px; margin:0; padding:10px; font-size:10px;" onclick="switchGame('racer')">NEON_RACER</button>
                            <button class="auth-submit-btn" style="width:140px; margin:0; padding:10px; font-size:10px; background:var(--os-accent-safe); color:#000;" onclick="switchGame('def')">DEFENDER</button>
                        </div>
                        <div class="difficulty-selector">
                            <button id="d-1" class="diff-btn active" onclick="changeDifficulty(1)">Easy</button>
                            <button id="d-2" class="diff-btn" onclick="changeDifficulty(2)">Medium</button>
                            <button id="d-5" class="diff-btn" onclick="changeDifficulty(5)">Hard_X5</button>
                        </div>
                    </div>
                    <canvas id="game-viewport" width="880" height="460"></canvas>
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:20px;">
                        <div id="game-score-readout" style="font-size:36px; color:var(--os-accent-safe); font-weight:900;">SCORE: 0000</div>
                        <div id="multiplier-tag" style="color:var(--os-accent-gold); letter-spacing:3px;">XP_MULT: 1.0X</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="win-term" class="os-window" style="width: 750px; height: 550px; top: 180px; right: 100px;">
            <div class="os-window-header" onmousedown="handleDrag(this.parentElement, event)">
                <div class="os-window-title">KALI_ZSH_TERMINAL</div>
                <div class="os-window-controls">
                    <div class="os-control-btn btn-close" onclick="toggleWindow('win-term')"></div>
                </div>
            </div>
            <div class="os-window-body">
                <div id="terminal-container">
                    <div id="terminal-log-area" class="terminal-log">ILIA-OS [Version 22.0.4] [Secure Kernel Active]... Type 'help' for instructions.</div>
                    <div class="terminal-input-wrapper">
                        <span class="terminal-prompt" id="term-prompt-label">root@ilia:~$</span>
                        <input type="text" id="terminal-input-field" autofocus autocomplete="off">
                    </div>
                </div>
            </div>
        </div>

        <div id="win-vault" class="os-window" style="width: 600px; height: 400px; top: 300px; left: 400px;">
            <div class="os-window-header" onmousedown="handleDrag(this.parentElement, event)">
                <div class="os-window-title">SECURE_VAULT_FILES</div>
                <div class="os-window-controls">
                    <div class="os-control-btn btn-close" onclick="toggleWindow('win-vault')"></div>
                </div>
            </div>
            <div class="os-window-body">
                <div id="vault-content" style="display:grid; grid-template-columns: repeat(3, 1fr); gap:20px;">
                    </div>
            </div>
        </div>

        <div id="global-taskbar">
            <div class="task-stat-block">USER_ID: <span id="stat-name">GUEST</span></div>
            <div class="task-stat-block">REGION: <span id="stat-loc">UKN</span></div>
            <div class="task-stat-block">GLOBAL_XP: <span id="stat-xp">0</span></div>
            <div class="task-stat-block">LEVEL: <span id="stat-lvl" style="color:var(--os-accent-gold)">1</span></div>
            <div id="os-clock">00:00:00</div>
        </div>

    </div>

    

<script>

    let STATE = {
        user: { name: "Ilia", loc: "Earth", age: 0, xp: 0, lvl: 1 },
        ui: { zIndex: 100, activeWin: null },
        game: { mode: '', score: 0, diff: 1, frame: 0, entities: [], bullets: [] },
        keys: {}
    };

    function saveProfile() {
        const payload = JSON.stringify(STATE.user);
        localStorage.setItem('ilia_os_v22_data', payload);
        syncUI();
    }

    function loadProfile() {
        const data = localStorage.getItem('ilia_os_v22_data');
        if (data) {
            STATE.user = JSON.parse(data);
            return true;
        }
        return false;
    }

    function syncUI() {
        document.getElementById('stat-name').innerText = STATE.user.name.toUpperCase();
        document.getElementById('stat-loc').innerText = STATE.user.loc.toUpperCase();
        document.getElementById('stat-xp').innerText = Math.floor(STATE.user.xp);
        document.getElementById('stat-lvl').innerText = Math.floor(STATE.user.xp / 1000) + 1;
        document.getElementById('term-prompt-label').innerText = `${STATE.user.name.toLowerCase()}@kali:~$`;
    }

    function systemInitialize() {
        const n = document.getElementById('input-alias').value;
        const r = document.getElementById('input-region').value;
        const a = document.getElementById('input-age').value;

        if (!n) return alert("Hacker Alias Required.");
        
        STATE.user.name = n;
        STATE.user.loc = r || "Hidden";
        STATE.user.age = a || 20;
        
        saveProfile();
        bootSequence();
    }

    function bootSequence() {
        document.getElementById('auth-overlay').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('auth-overlay').style.display = 'none';
            document.getElementById('desktop-workspace').style.display = 'block';
            syncUI();
        }, 1000);
    }

    const canvasB = document.getElementById('neural-background');
    const ctxB = canvasB.getContext('2d');
    canvasB.width = window.innerWidth;
    canvasB.height = window.innerHeight;
    let particles = [];

    class Particle {
        constructor() {
            this.x = Math.random() * canvasB.width;
            this.y = Math.random() * canvasB.height;
            this.vx = (Math.random() - 0.5) * 1.5;
            this.vy = (Math.random() - 0.5) * 1.5;
        }
        update() {
            this.x += this.vx;
            this.y += this.vy;
            if (this.x < 0 || this.x > canvasB.width) this.vx *= -1;
            if (this.y < 0 || this.y > canvasB.height) this.vy *= -1;
        }
    }

    for (let i = 0; i < 80; i++) particles.push(new Particle());

    function animateBg() {
        ctxB.clearRect(0, 0, canvasB.width, canvasB.height);
        ctxB.fillStyle = "rgba(0, 243, 255, 0.8)";
        particles.forEach(p => {
            p.update();
            ctxB.beginPath();
            ctxB.arc(p.x, p.y, 1.5, 0, Math.PI * 2);
            ctxB.fill();
        });
        requestAnimationFrame(animateBg);
    }

    function toggleWindow(id) {
        const w = document.getElementById(id);
        if (w.style.display === 'flex') {
            w.style.display = 'none';
        } else {
            w.style.display = 'flex';
            w.style.zIndex = ++STATE.ui.zIndex;
        }
    }

    function handleDrag(el, e) {
        let sx = e.clientX - el.offsetLeft;
        let sy = e.clientY - el.offsetTop;
        document.onmousemove = (e) => {
            el.style.left = e.clientX - sx + 'px';
            el.style.top = e.clientY - sy + 'px';
            el.style.zIndex = ++STATE.ui.zIndex;
        };
        document.onmouseup = () => { document.onmousemove = null; };
    }


    const gC = document.getElementById('game-viewport');
    const gx = gC.getContext('2d');
    let pObj = { x: 440, y: 380, w: 50, h: 70 };

    window.onkeydown = (e) => { STATE.keys[e.code] = true; };
    window.onkeyup = (e) => { STATE.keys[e.code] = false; };

    function changeDifficulty(val) {
        STATE.game.diff = val;
        document.querySelectorAll('.diff-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('d-' + val).classList.add('active');
        document.getElementById('multiplier-tag').innerText = `XP_MULT: ${val}.0X`;
    }

    function switchGame(m) {
        STATE.game.mode = m;
        STATE.game.score = 0;
        STATE.game.entities = [];
        STATE.game.bullets = [];
        STATE.game.frame = 0;
    }

    function runArcade() {
        if (!STATE.game.mode) {
            requestAnimationFrame(runArcade);
            return;
        }

        gx.fillStyle = "#000";
        gx.fillRect(0, 0, gC.width, gC.height);
        STATE.game.frame++;

        // NEON RACER LOGIC
        if (STATE.game.mode === 'racer') {
            let speed = 8 + (STATE.game.diff * 3);
            if ((STATE.keys.ArrowLeft || STATE.keys.KeyA) && pObj.x > 0) pObj.x -= speed;
            if ((STATE.keys.ArrowRight || STATE.keys.KeyD) && pObj.x < gC.width - pObj.w) pObj.x += speed;

            if (STATE.game.frame % (Math.floor(25 / STATE.game.diff)) === 0) {
                STATE.game.entities.push({
                    x: Math.random() * (gC.width - 50),
                    y: -60,
                    v: 5 + (STATE.game.diff * 2)
                });
            }

            gx.shadowBlur = 15; gx.shadowColor = "cyan";
            gx.fillStyle = "cyan";
            gx.fillRect(pObj.x, 380, pObj.w, pObj.h);
            gx.shadowBlur = 0;

            STATE.game.entities.forEach((ent, i) => {
                ent.y += ent.v;
                gx.fillStyle = "red";
                gx.fillRect(ent.x, ent.y, 50, 50);
                
                if (ent.y > gC.height) {
                    STATE.game.entities.splice(i, 1);
                    STATE.game.score++;
                    STATE.user.xp += (1 * STATE.game.diff);
                    saveProfile();
                }

                if (pObj.x < ent.x + 50 && pObj.x + pObj.w > ent.x && 380 < ent.y + 50) {
                    switchGame('racer');
                }
            });
        }

        if (STATE.game.mode === 'def') {
            let pS = 12;
            if ((STATE.keys.ArrowLeft || STATE.keys.KeyA) && pObj.x > 0) pObj.x -= pS;
            if ((STATE.keys.ArrowRight || STATE.keys.KeyD) && pObj.x < gC.width - pObj.w) pObj.x += pS;
            if ((STATE.keys.Space || STATE.keys.KeyW) && STATE.game.frame % 10 === 0) {
                STATE.game.bullets.push({ x: pObj.x + 22, y: 380 });
            }

            gx.fillStyle = "#39ff14";
            gx.fillRect(pObj.x, 430, pObj.w, 20);

            STATE.game.bullets.forEach((b, i) => {
                b.y -= 15;
                gx.fillStyle = "#fff";
                gx.fillRect(b.x, b.y, 6, 18);
                if (b.y < 0) STATE.game.bullets.splice(i, 1);
            });

            if (STATE.game.frame % (Math.floor(35 / STATE.game.diff)) === 0) {
                STATE.game.entities.push({ x: Math.random() * (gC.width - 40), y: -40, v: 2 + STATE.game.diff });
            }

            STATE.game.entities.forEach((ent, i) => {
                ent.y += ent.v;
                gx.fillStyle = "magenta";
                gx.fillRect(ent.x, ent.y, 40, 40);

                STATE.game.bullets.forEach((b, bi) => {
                    if (b.x < ent.x + 40 && b.x + 6 > ent.x && b.y < ent.y + 40) {
                        STATE.game.entities.splice(i, 1);
                        STATE.game.bullets.splice(bi, 1);
                        STATE.game.score += 10;
                        STATE.user.xp += (5 * STATE.game.diff);
                        saveProfile();
                    }
                });

                if (ent.y > gC.height) switchGame('def');
            });
        }

        document.getElementById('game-score-readout').innerText = `SCORE: ${STATE.game.score.toString().padStart(4, '0')}`;
        requestAnimationFrame(runArcade);
    }
    runArcade();

    const tIn = document.getElementById('terminal-input-field');
    const tOut = document.getElementById('terminal-log-area');

    tIn.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
            const val = tIn.value.trim().toLowerCase();
            tOut.innerHTML += `\n<span style="color:cyan">${STATE.user.name}@kali:~$</span> ${tIn.value}`;
            
            const cmd = val.split(' ')[0];

            if (cmd === 'help') {
                tOut.innerHTML += `\nCommands:\n - ls: List virtual directory\n - whoami: Identity dump\n - status: System health\n - clear: Wipe terminal\n - exit: End session`;
            } else if (cmd === 'ls') {
                tOut.innerHTML += `\n/root\n/bin\n/usr\n/games\n/vault\n/secret_data.txt\n/ilia_config.sys`;
            } else if (cmd === 'whoami') {
                tOut.innerHTML += `\nID: ${STATE.user.name}\nREG: ${STATE.user.loc}\nXP: ${STATE.user.xp}\nLVL: ${Math.floor(STATE.user.xp/1000)+1}`;
            } else if (cmd === 'clear') {
                tOut.innerHTML = `Terminal Cleared.`;
            } else if (cmd === 'status') {
                tOut.innerHTML += `\nKernel: Stable\nPersistence: Active\nDB: LocalStorage_V22\nBattery: 100%`;
            } else {
                tOut.innerHTML += `\nBASH: command not found: ${cmd}`;
            }

            tIn.value = '';
            tOut.scrollTop = tOut.scrollHeight;
        }
    });


    function factoryReset() {
        if (confirm("DANGER: This will erase all XP and data. Continue?")) {
            localStorage.clear();
            location.reload();
        }
    }

    setInterval(() => {
        document.getElementById('os-clock').innerText = new Date().toLocaleTimeString();
    }, 1000);

    window.onload = () => {
        if (loadProfile()) {
            bootSequence();
        }
    };



</script>
</body>
</html>
